**优化mysql的配置通常比询问我的服务器最佳配置文件是什么更加重要**

配置文件通常位于

```ini
/etc/my.cnf

or

/etc/mysql/my.cnf
```

#### 语法,作用域和动态性

在命令行中指定参数通常**不区分单词之间的是下划线还是中划线**

```bash
/usr/sbin/mysqld --auto-increment-offset=5

等效

/usr/sbin/mysqld --auto_increment_offset=5
```

#### 持久化系统变量

如果**重启**mysql,**即使使用了`set global`来更改全局变量**,mysql也会**恢复到配置文件中**的状态

8.0中引入了持久化系统变量的新功能

`set persist`命令允许在**运行时设置值**,mysql会将这个值**写入磁盘**,下次重启也将**继续使用**该值

#### 设置变量的副作用

在运行时设置变量会产生意想不到的副作用,导致服务器执行大量的工作

> 尽量避免动态设置变量

#### 创建mysql配置文件

>  每台服务器,每个生产环境,每个种业务模式都会产生出一种不同的最佳配置,即便服务器配置一样.一个良好的配置应该是自己调试得来,而不是咨询

##### 最小化配置

```init
[mysqld]
#通用配置
#GENERAL

datadir  mysql数据存放位置
socket   指定客户端连接到mysql服务器使用的套接字文件路径
pid_file mysql服务器进程ID存储位置
user     mysql启动用户
port     mysql启动端口

#innodb引擎配置
#INNODB
innodb_buffer_pool_siez   innoDB缓冲池大小
innodb_log_file_size      innoDB日志文件大小
innodb_flush_method       指定innodb将数据刷新到磁盘上的方式

#LOGGING
...

#OTHER
tmp_table_size     指定存储中创建的临时表的最大size
max_heap_table_size 指定堆中临时表最大size
max_connections     最大连接数
thread_cahce_size   指定线程缓存的大小
table_open_cache    控制缓存打开表文件的数量
open_files_limit    指定单个进程同时打开文件数量的上限

[client]
socket
prot
```

